{"version":3,"sources":["pageInterpolators.ts"],"names":["Platform","Extrapolate","interpolate","defaultPageInterpolator","pageInterpolatorSlide","focusAnim","pageWidth","pageHeight","vertical","translateX","value","translateY","transform","pageInterpolatorCube","size","ratio","OS","perspective","angle","Math","atan","inputVal","inputRange","translate","CLAMP","rotate","translate1","extra","cos","translate2","rotateX","rotateY","opacity","pageInterpolatorStack","pageBuffer","scale","pageInterpolatorTurnIn"],"mappings":"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","sourcesContent":["import { Platform } from \"react-native\";\nimport {\n  Extrapolate,\n  interpolate,\n  useAnimatedStyle,\n} from \"react-native-reanimated\";\nimport { PageInterpolatorParams } from \".\";\n\nexport const defaultPageInterpolator = pageInterpolatorSlide;\n\nexport function pageInterpolatorSlide({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  vertical,\n}: PageInterpolatorParams): ReturnType<typeof useAnimatedStyle> {\n  \"worklet\";\n\n  const translateX = vertical\n    ? 0\n    : interpolate(\n        focusAnim.value,\n        [-1, 0, 1],\n        [-pageWidth.value, 0, pageWidth.value]\n      );\n  const translateY = vertical\n    ? interpolate(\n        focusAnim.value,\n        [-1, 0, 1],\n        [-pageHeight.value, 0, pageHeight.value]\n      )\n    : 0;\n\n  return {\n    transform: [{ translateX }, { translateY }],\n  };\n}\n\nexport function pageInterpolatorCube({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  vertical,\n}: PageInterpolatorParams) {\n  \"worklet\";\n\n  const size = vertical ? pageHeight.value : pageWidth.value;\n\n  // FIXME: how to calculate this programatically?\n  const ratio = Platform.OS === \"android\" ? 1.23 : 2;\n  const perspective = size;\n\n  const angle = Math.atan(perspective / (size / 2));\n\n  const inputVal = interpolate(focusAnim.value, [-1, 1], [1, -1]);\n  const inputRange = [-1, 1];\n\n  const translate = interpolate(\n    inputVal,\n    inputRange,\n    [size / ratio, -size / ratio],\n    Extrapolate.CLAMP\n  );\n\n  const rotate = interpolate(\n    inputVal,\n    inputRange,\n    [angle, -angle],\n    Extrapolate.CLAMP\n  );\n\n  const translate1 = interpolate(\n    inputVal,\n    inputRange,\n    [size / 2, -size / 2],\n    Extrapolate.CLAMP\n  );\n\n  const extra = size / ratio / Math.cos(angle / 2) - size / ratio;\n  const translate2 = interpolate(\n    inputVal,\n    inputRange,\n    [-extra, extra],\n    Extrapolate.CLAMP\n  );\n\n  return {\n    transform: vertical\n      ? [\n          { perspective },\n          { translateY: translate },\n          { rotateX: `${-rotate}rad` },\n          { translateY: translate1 },\n          { translateY: translate2 },\n        ]\n      : [\n          { perspective },\n          { translateX: translate },\n          { rotateY: `${rotate}rad` },\n          { translateX: translate1 },\n          { translateX: translate2 },\n        ],\n    opacity: interpolate(inputVal, [-2, -1, 0, 1, 2], [0, 0.9, 1, 0.9, 0]),\n  };\n}\n\nexport function pageInterpolatorStack({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  pageBuffer,\n  vertical,\n}: PageInterpolatorParams) {\n  \"worklet\";\n\n  const translateX = interpolate(\n    focusAnim.value,\n    [-1, 0, 1],\n    vertical ? [10, 0, -10] : [-pageWidth.value * 1.3, 0, -10]\n  );\n\n  const translateY = interpolate(\n    focusAnim.value,\n    [-0.5, 0, 1],\n    vertical ? [-pageHeight.value * 1.3, 0, -10] : [10, 0, -10]\n  );\n\n  const opacity = interpolate(\n    focusAnim.value,\n    [-pageBuffer, -pageBuffer + 1, 0, pageBuffer - 1, pageBuffer],\n    [0, 1, 1, 1, 1]\n  );\n\n  const scale = interpolate(\n    focusAnim.value,\n    [-pageBuffer, -pageBuffer + 1, 0, pageBuffer - 1, pageBuffer],\n    [0.1, 0.9, 0.9, 0.9, 0.1]\n  );\n\n  return {\n    transform: [{ translateX }, { translateY }, { scale }],\n    opacity,\n  };\n}\n\nexport function pageInterpolatorTurnIn({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  vertical,\n}: PageInterpolatorParams) {\n  \"worklet\";\n\n  const translateX = interpolate(\n    focusAnim.value,\n    [-1, 0, 1],\n    vertical ? [0, 0, 0] : [-pageWidth.value * 0.4, 0, pageWidth.value * 0.4]\n  );\n\n  const translateY = interpolate(\n    focusAnim.value,\n    [-1, 0, 1],\n    vertical ? [-pageHeight.value * 0.5, 0, pageHeight.value * 0.5] : [0, 0, 0]\n  );\n\n  const scale = interpolate(focusAnim.value, [-1, 0, 1], [0.4, 0.5, 0.4]);\n\n  const rotateY = interpolate(\n    focusAnim.value,\n    [-1, 1],\n    vertical ? [0, 0] : [75, -75],\n    Extrapolate.CLAMP\n  );\n  const rotateX = interpolate(\n    focusAnim.value,\n    [-1, 1],\n    vertical ? [-75, 75] : [0, 0],\n    Extrapolate.CLAMP\n  );\n\n  return {\n    transform: [\n      { perspective: 1000 },\n      { translateX },\n      { translateY },\n      { rotateY: `${rotateY}deg` },\n      { rotateX: `${rotateX}deg` },\n      { scale },\n    ],\n  };\n}\n"]}