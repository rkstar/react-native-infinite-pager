{"version":3,"sources":["pageInterpolators.ts"],"names":["defaultPageInterpolator","pageInterpolatorSlide","focusAnim","pageWidth","pageHeight","vertical","translateX","value","translateY","transform","pageInterpolatorCube","size","ratio","Platform","OS","perspective","angle","Math","atan","inputVal","inputRange","translate","Extrapolate","CLAMP","rotate","translate1","extra","cos","translate2","rotateX","rotateY","opacity","pageInterpolatorStack","pageBuffer","scale","pageInterpolatorTurnIn"],"mappings":"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","sourcesContent":["import { Platform } from \"react-native\";\nimport {\n  Extrapolate,\n  interpolate,\n  useAnimatedStyle,\n} from \"react-native-reanimated\";\nimport { PageInterpolatorParams } from \".\";\n\nexport const defaultPageInterpolator = pageInterpolatorSlide;\n\nexport function pageInterpolatorSlide({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  vertical,\n}: PageInterpolatorParams): ReturnType<typeof useAnimatedStyle> {\n  \"worklet\";\n\n  const translateX = vertical\n    ? 0\n    : interpolate(\n        focusAnim.value,\n        [-1, 0, 1],\n        [-pageWidth.value, 0, pageWidth.value]\n      );\n  const translateY = vertical\n    ? interpolate(\n        focusAnim.value,\n        [-1, 0, 1],\n        [-pageHeight.value, 0, pageHeight.value]\n      )\n    : 0;\n\n  return {\n    transform: [{ translateX }, { translateY }],\n  };\n}\n\nexport function pageInterpolatorCube({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  vertical,\n}: PageInterpolatorParams) {\n  \"worklet\";\n\n  const size = vertical ? pageHeight.value : pageWidth.value;\n\n  // FIXME: how to calculate this programatically?\n  const ratio = Platform.OS === \"android\" ? 1.23 : 2;\n  const perspective = size;\n\n  const angle = Math.atan(perspective / (size / 2));\n\n  const inputVal = interpolate(focusAnim.value, [-1, 1], [1, -1]);\n  const inputRange = [-1, 1];\n\n  const translate = interpolate(\n    inputVal,\n    inputRange,\n    [size / ratio, -size / ratio],\n    Extrapolate.CLAMP\n  );\n\n  const rotate = interpolate(\n    inputVal,\n    inputRange,\n    [angle, -angle],\n    Extrapolate.CLAMP\n  );\n\n  const translate1 = interpolate(\n    inputVal,\n    inputRange,\n    [size / 2, -size / 2],\n    Extrapolate.CLAMP\n  );\n\n  const extra = size / ratio / Math.cos(angle / 2) - size / ratio;\n  const translate2 = interpolate(\n    inputVal,\n    inputRange,\n    [-extra, extra],\n    Extrapolate.CLAMP\n  );\n\n  return {\n    transform: vertical\n      ? [\n          { perspective },\n          { translateY: translate },\n          { rotateX: `${-rotate}rad` },\n          { translateY: translate1 },\n          { translateY: translate2 },\n        ]\n      : [\n          { perspective },\n          { translateX: translate },\n          { rotateY: `${rotate}rad` },\n          { translateX: translate1 },\n          { translateX: translate2 },\n        ],\n    opacity: interpolate(inputVal, [-2, -1, 0, 1, 2], [0, 0.9, 1, 0.9, 0]),\n  };\n}\n\nexport function pageInterpolatorStack({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  pageBuffer,\n  vertical,\n}: PageInterpolatorParams) {\n  \"worklet\";\n\n  const translateX = interpolate(\n    focusAnim.value,\n    [-1, 0, 1],\n    vertical ? [10, 0, -10] : [-pageWidth.value * 1.3, 0, -10]\n  );\n\n  const translateY = interpolate(\n    focusAnim.value,\n    [-0.5, 0, 1],\n    vertical ? [-pageHeight.value * 1.3, 0, -10] : [10, 0, -10]\n  );\n\n  const opacity = interpolate(\n    focusAnim.value,\n    [-pageBuffer, -pageBuffer + 1, 0, pageBuffer - 1, pageBuffer],\n    [0, 1, 1, 1, 1]\n  );\n\n  const scale = interpolate(\n    focusAnim.value,\n    [-pageBuffer, -pageBuffer + 1, 0, pageBuffer - 1, pageBuffer],\n    [0.1, 0.9, 0.9, 0.9, 0.1]\n  );\n\n  return {\n    transform: [{ translateX }, { translateY }, { scale }],\n    opacity,\n  };\n}\n\nexport function pageInterpolatorTurnIn({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  vertical,\n}: PageInterpolatorParams) {\n  \"worklet\";\n\n  const translateX = interpolate(\n    focusAnim.value,\n    [-1, 0, 1],\n    vertical ? [0, 0, 0] : [-pageWidth.value * 0.4, 0, pageWidth.value * 0.4]\n  );\n\n  const translateY = interpolate(\n    focusAnim.value,\n    [-1, 0, 1],\n    vertical ? [-pageHeight.value * 0.5, 0, pageHeight.value * 0.5] : [0, 0, 0]\n  );\n\n  const scale = interpolate(focusAnim.value, [-1, 0, 1], [0.4, 0.5, 0.4]);\n\n  const rotateY = interpolate(\n    focusAnim.value,\n    [-1, 1],\n    vertical ? [0, 0] : [75, -75],\n    Extrapolate.CLAMP\n  );\n  const rotateX = interpolate(\n    focusAnim.value,\n    [-1, 1],\n    vertical ? [-75, 75] : [0, 0],\n    Extrapolate.CLAMP\n  );\n\n  return {\n    transform: [\n      { perspective: 1000 },\n      { translateX },\n      { translateY },\n      { rotateY: `${rotateY}deg` },\n      { rotateX: `${rotateX}deg` },\n      { scale },\n    ],\n  };\n}\n"]}